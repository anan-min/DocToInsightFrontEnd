<div class="h-screen bg-gray-50 flex md:flex-row flex-col overflow-y-scroll">
  <!-- File Upload Section -->
  <div class="md:w-1/2 p-8">
    <div class="max-w-2xl mx-auto">
      <h1 class="text-4xl font-bold text-gray-900 mb-2">DocToInsight</h1>
      <p class="text-lg text-gray-600 mb-8">Upload your documents for AI-powered analysis</p>

      <div class="bg-white rounded-lg shadow-md p-6">
        <p-toast />
        <p-fileupload name="myfile" [multiple]="false" maxFileSize="104857600" [auto]="false"
          (onSelect)="onSelectedFiles($event)">

          <ng-template #header let-files let-chooseCallback="chooseCallback" let-clearCallback="clearCallback"
            let-uploadCallback="uploadCallback">
            <div class="flex flex-col gap-4 w-full">
              <div class="flex flex-wrap justify-between items-center gap-2">
                <h3 class="mx-2 text-lg font-semibold text-gray-800">Upload Files</h3>
                <div class="flex flex-wrap gap-2  justify-start">
                  <button (click)="choose($event, chooseCallback)"
                    class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2">
                    <i class="pi pi-upload"></i>
                    Choose Files
                  </button>
                  <button (click)="analyzeFile()" [disabled]="!files || files.length === 0"
                    class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2">
                    <i class="pi pi-cog"></i>
                    Analyze
                  </button>
                  <button (click)="clearCallback()" [disabled]="!files || files.length === 0"
                    class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2">
                    <i class="pi pi-times"></i>
                    Clear
                  </button>
                </div>
              </div>
              <p *ngIf="files?.length > 0" class="text-sm text-gray-600">{{ formatSize(totalSize) }} / 100MB</p>
            </div>
          </ng-template>

          <ng-template #content let-files let-uploadedFiles="uploadedFiles" let-removeFileCallback="removeFileCallback"
            let-removeUploadedFileCallback="removeUploadedFileCallback">
            <div class="space-y-6 mt-6">

              <!-- Pending Files -->
              <div *ngIf="files?.length > 0">
                <h4 class="text-md font-medium text-gray-700 mb-3">Pending Files</h4>
                <div class="space-y-2">
                  <div *ngFor="let file of files; let i = index"
                    class="flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                    <div class="flex items-center gap-3">
                      <i class="pi pi-file text-yellow-600 text-xl"></i>
                      <div>
                        <p class="font-medium text-gray-900 truncate max-w-xs">{{ file.name }}</p>
                        <p class="text-sm text-gray-500">{{ formatSize(file.size) }}</p>
                      </div>
                    </div>
                    <div class="flex items-center gap-2">
                      <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">Pending</span>
                      <button (click)="onRemoveTemplatingFile($event, file, removeFileCallback, i)"
                        class="p-1 text-red-500 hover:bg-red-100 rounded">
                        <i class="pi pi-times"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Completed Files -->
              <div *ngIf="uploadedFiles?.length > 0">
                <h4 class="text-md font-medium text-gray-700 mb-3">Completed Files</h4>
                <div class="space-y-2">
                  <div *ngFor="let file of uploadedFiles; let i = index"
                    class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
                    <div class="flex items-center gap-3">
                      <i class="pi pi-check-circle text-green-600 text-xl"></i>
                      <div>
                        <p class="font-medium text-gray-900 truncate max-w-xs">{{ file.name }}</p>
                        <p class="text-sm text-gray-500">{{ formatSize(file.size) }}</p>
                      </div>
                    </div>
                    <div class="flex items-center gap-2">
                      <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">Completed</span>
                      <button (click)="removeUploadedFileCallback(i)" class="p-1 text-red-500 hover:bg-red-100 rounded">
                        <i class="pi pi-times"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </ng-template>

          <ng-template #file></ng-template>

          <ng-template #empty>
            <div
              class="border-2 border-dashed border-gray-300 rounded-lg p-12 text-center hover:border-blue-400 transition-colors">
              <i class="pi pi-cloud-upload text-6xl text-gray-400 mb-4"></i>
              <h4 class="text-lg font-medium text-gray-900 mb-2">Upload your documents</h4>
              <p class="text-gray-600 mb-4">Drag and drop files here, or click to browse</p>
              <p class="text-sm text-gray-500">Supports all file types • Single file • Max 100MB</p>
            </div>
          </ng-template>
        </p-fileupload>
      </div>
    </div>
  </div>

  <!-- Analysis Results Section -->
  <div class="md:w-1/2 bg-white border-l border-gray-200 p-8 h-full flex-1">
    <div class="max-w-2xl mx-auto">
      <h2 class="text-2xl font-bold text-gray-900 mb-6">Analysis Results</h2>

      <!-- Placeholder for analysis results -->
      <div class="text-center py-16">
        <i class="pi pi-chart-line text-6xl text-gray-300 mb-4"></i>
        <p class="text-gray-500 text-lg">Upload and analyze files to see insights here</p>
      </div>

      <!-- This is where the analysis list will be populated -->
      <div id="analysis-results-container" class="space-y-4">
        <!-- Analysis results will be dynamically added here -->
      </div>
    </div>
  </div>
</div>